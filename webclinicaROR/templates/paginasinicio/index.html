{% extends "paginasinicio/base.html" %}
{% load static %}

{% block content %}

  <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-indicators">
      <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
      <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
      <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
    </div>

    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="{% static 'assets/image/clinicafuera1.png' %}" class="d-block w-100" alt="...">
        <div class="carousel-caption d-md-block info-box">
          <h5>Bienvenido a la Clínica</h5>
          <p>Atención de calidad para toda la familia</p>
          <a href="{% url 'reserva' %}" class="btn btn-warning">Reserva tu hora</a>
        </div>
      </div>
      <div class="carousel-item">
        <img src="{% static 'assets/image/clinicadentro1.png' %}" class="d-block w-100" alt="...">
        <div class="info-box-2 text-center">
          <h2>Nuestras Especialidades</h2>
          <p>Contamos con los mejores profesionales en distintas áreas médicas.</p>
          <a href="{% url 'especialidades' %}" class="btn btn-warning">Ver más</a>
        </div>
      </div>
      <div class="carousel-item position-relative">
        <img src="{% static 'assets/image/clinicatencion1.png' %}" class="d-block w-100" alt="...">
        <div class="circle-box text-center">
          <h5>Atención Personalizada</h5>
          <p>Tu salud es nuestra prioridad</p>
          <a href="{% url 'contacto' %}" class="btn btn-warning">Contáctanos</a>
        </div>
      </div>
    </div>

    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
  <div class="box shadow p-4 mb-4 bg-body rounded mt-5">
    <div class="text-center mb-4">
      <h1 class="fw-bold titulos">Bienvenidos a ROR-Med Clinic</h1>
      <p class="lead">Tu salud es nuestra prioridad. En ROR-Med Clinic, ofrecemos atención médica de calidad con un equipo de profesionales dedicados a tu bienestar.</p>
    </div>
  </div>

  <div class="container my-5">
    <div class="row text-center">
        <div class="col-md-3 mb-3">
          <div class="card especial h-100">
            <a link href="{% url 'reservalab' %}">
            <img src="{% static '/assets/icon/logo-exam.png' %}" class="card-img-top" alt="..."></a>
            <div class="card-body">
              <h5 class="carta-titulo">Reserva hora para examenes y laboratorio</h5>
            </div>
          </div>
        </div>
        <div class="col-md-3 mb-3">
          <div class="card especial h-100">
            <a link href="{% url 'reservaonline' %}">
            <img src="{% static '/assets/icon/logo-med-online.png' %}" class="card-img-top" alt="..."></a>
            <div class="card-body">
              <h5 class="carta-titulo">Agenda tu consulta médica en línea</h5>
            </div>
          </div>
        </div>
        <div class="col-md-3 mb-3">
          <div class="card especial h-100">
            <a link href="{% url 'aranceles' %}">
            <img src="{% static '/assets/icon/logo-arancel.png' %}" class="card-img-top" alt="..."></a>
            <div class="card-body">
              <h5 class="carta-titulo">Aranceles</h5>
            </div>
          </div>
        </div>
        <div class="col-md-3 mb-3">
          <div class="card especial h-100">
            <a link href="{% url 'seguros' %}">
            <img src="{% static '/assets/icon/logo-seguro.png' %}" class="card-img-top" alt="..."></a>
            <div class="card-body">
              <h5 class="carta-titulo">Convenios y seguros</h5>
            </div>
          </div>
        </div>
        <div class="col-md-3 mb-3">
          <div class="card especial h-100">
            <a link href="{% url 'pagocuentas' %}">
            <img src="{% static '/assets/icon/logo-pago.png' %}" class="card-img-top" alt="..."></a>
            <div class="card-body">
              <h5 class="carta-titulo">Pago de cuentas</h5>
            </div>
          </div>
        </div>
        <div class="col-md-3 mb-3">
          <div class="card especial h-100">
            <a link href="{% url 'farmacia' %}">
            <img src="{% static '/assets/icon/logo-farmacia.png' %}" class="card-img-top" alt="..."></a>
            <div class="card-body">
              <h5 class="carta-titulo">Farmacia en línea</h5>
            </div>
          </div>
        </div>
        <div class="col-md-3 mb-3">
          <div class="card especial h-100">
            <a link href="{% url 'soporte' %}">
            <img src="{% static '/assets/icon/logo-atencion.png' %}" class="card-img-top" alt="..."></a>
            <div class="card-body">
              <h5 class="carta-titulo">Soporte y atención al cliente</h5>
            </div>
          </div>
        </div>
        <div class="col-md-3 mb-3">
          <div class="card especial h-100">
            <a link href="{% url 'preguntas' %}">
            <img src="{% static '/assets/icon/logo-preguntas.png' %}" class="card-img-top" alt="..."></a>
            <div class="card-body">
              <h5 class="carta-titulo">Preguntas frecuentes</h5>
            </div>
          </div>
        </div>
    </div>
  </div>
  <section class="clima-salud-section py-4 mb-4">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-lg-4">
          <div class="clima-info-card p-4 bg-white rounded-3 shadow-sm">
            <h4 class="text-success mb-3">
                Clima y Salud Hoy
            </h4>
            <div id="clima-data">
              <div class="d-flex align-items-center mb-2">
                <span class="fw-bold">Cargando información climática...</span>
              </div>
              <small class="text-muted">
                  Obteniendo datos reales...
              </small>
            </div>
          </div>
        </div>
        <div class="col-lg-8">
          <div class="clima-recomendaciones p-4">
            <h5 class="text-success mb-3">
                Recomendaciones de Salud
            </h5>
            <div id="recomendaciones-salud">
              <div class="alert alert-info d-flex align-items-center">
                <span>Cargando recomendaciones personalizadas...</span>
              </div>
            </div>
            <small class="text-muted">
                Información actualizada desde servicios meteorológicos
            </small>
          </div>
        </div>
      </div>
    </div>
  </section>


<section class="py-5 bg-light">
  <div class="container">
    <h3 class="text-center mb-4 titulos">Nuestros médicos y pacientes felices</h3>
    
    <div id="miniCarousel" class="carousel slide" data-bs-ride="carousel">
      <div class="carousel-inner text-center">

        <div class="carousel-item active">
          <img src="{% static '/assets/image/doc-juan.png' %}" class="rounded mx-auto d-block" 
              alt="Doctor sonriente" style="max-width: 400px; height: auto;">
          <p class="mt-3 lead">Dr. Juan Pérez - Especialista en Pediatría</p>
        </div>

        <div class="carousel-item">
          <img src="{% static '/assets/image/paciente1.png' %}" class="rounded mx-auto d-block" 
              alt="Paciente feliz" style="max-width: 400px; height: auto;">
          <p class="mt-3 lead">Pacientes felices con su recuperación</p>
        </div>

        <div class="carousel-item">
          <img src="{% static '/assets/image/doc-maria.png' %}" class="rounded mx-auto d-block" 
              alt="Doctora sonriente" style="max-width: 400px; height: auto;">
          <p class="mt-3 lead">Dra. María López - Medicina General</p>
        </div>

      </div>

      <button class="carousel-control-prev" type="button" data-bs-target="#miniCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon"></span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#miniCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon"></span>
      </button>
    </div>
  </div>
</section>


  <section id="informate" class="py-5">
  <div class="container text-center">
    <h2 class="mb-4 titulos">Infórmate</h2>
    <p class="lead">Entérate de nuestras novedades y consejos médicos.</p>
  </div>
</section>


<div class="container my-5">
  <div class="row g-4">
    <div class="col-md-4">
      <div class="card info h-100">
        <img src="{% static '/assets/image/prevencion.png' %}" class="card-img-top-3" alt="Medidas de prevención">
        <div class="card-body informacion">
          <h5 class="card-title titulos2">Medidas de prevención de enfermedades</h5>
          <p class="card-text lead">Consejos y recomendaciones para mantener una buena salud y prevenir enfermedades comunes.</p>
          <a href="#" class="btn btn-warning">Leer más</a>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card info h-100">
        <img src="{% static '/assets/image/vacuna.png' %}" class="card-img-top-3" alt="Vacunación">
        <div class="card-body informacion">
          <h5 class="card-title titulos2">Importancia de la vacunación</h5>
          <p class="card-text lead">Información sobre las vacunas recomendadas para diferentes edades y condiciones de salud.</p>
          <a href="#" class="btn btn-warning">Leer más</a>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card info h-100">
        <img src="{% static '/assets/image/noticia.png' %}" class="card-img-top-3" alt="Salud mental">
        <div class="card-body informacion">
          <h5 class="card-title titulos2">Las ultimas noticias sobre Medicina</h5>
          <p class="card-text lead"> Nuevas estrategias para cuidar tu salud mental y fisica son descubiertas todo el tiempo.</p>
          <a href="#" class="btn btn-warning">Leer más</a>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Función para cargar datos REALES del clima
async function cargarClimaSalud() {
    try {
        const response = await fetch('/api/clima-salud/'); 
        const data = await response.json();
        
        const climaContainer = document.getElementById('clima-data');
        const recomendacionesContainer = document.getElementById('recomendaciones-salud');
        
        if (data.success) {
            climaContainer.innerHTML = `
                <div class="d-flex align-items-center mb-2">
                    <span class="fw-bold fs-4 me-2">${data.condiciones_actuales.temperatura}</span>
                    <small class="text-muted">Sensación: ${data.condiciones_actuales.sensacion_termica}</small>
                </div>
                <div class="d-flex align-items-center mb-2">
                    <span>Humedad: ${data.condiciones_actuales.humedad}</span>
                </div>
                <div class="d-flex align-items-center mb-3">
                    <span class="text-capitalize">${data.condiciones_actuales.descripcion}</span>
                </div>
                <small class="text-success fw-bold">${data.condiciones_actuales.estado}</small>
            `;
            
            let recomendacionesHTML = '';
            data.recomendaciones_salud.forEach((recomendacion, index) => {
                const alertClass = index === 0 ? 'alert-warning' : 'alert-info';
                recomendacionesHTML += `
                    <div class="alert ${alertClass} d-flex align-items-start mb-2">
                        <span>${recomendacion}</span>
                    </div>
                `;
            });
            recomendacionesContainer.innerHTML = recomendacionesHTML;
            
        } else {
            climaContainer.innerHTML = `
                <div class="d-flex align-items-center mb-2">
                    <span>Servicio climático no disponible</span>
                </div>
            `;
        }
    } catch (error) {
        console.error('Error al cargar clima:', error);
          const climaContainer = document.getElementById('clima-data');
          climaContainer.innerHTML = `<span>No se pudo cargar la información del clima.</span>`;
    }
}

document.addEventListener('DOMContentLoaded', cargarClimaSalud);
</script>
{% endblock %}